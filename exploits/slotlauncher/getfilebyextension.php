<?php
// Grab folder variable from url
$folder = $_REQUEST["folder"];
// If undefined
if (!isset ($folder))
{
	// Exit
	die("Error: please set the folder variable in the url, relative to getfilebyextension.php. It doesn't matter if it ends in a / or not.");
}
// If the folder doesn't end in a /
if (substr ($folder, -1) != '/')
{
	// Add one
	$folder .= '/';
}

// Grab extension variable from url
$extension = $_REQUEST["ext"];
// If undefined
if (!isset ($extension))
{
	// Exit
	die ("Error: please set the extension variable in the url. It doesn't matter if it begins with a . or not.");
}
// If the extension doesn't begin with a .
if (substr ($extension, 0) != '.')
{
	// Add it
	$extension = '.' . $extension;
}

// Combine the folder and the file to get the new path
$file = $folder . "*" . $extension;

// Find all occurences of the wildcard
$result = glob ($file);
// If none were found
if (count ($result) == 0)
{
	// Exit
	die ("Error: 404 File not found. Looked for a {$extension} file in {$folder}. Full string is {$file}");
}
// If more than one were found
else if (count ($result) > 1)
{
	$count = count($result);
	echo "Error: More than one result found. List: ";
	for ($i=0; $i < $count; $i++) 
	{ 
		echo $result[$i] . "<br>";
	}
	die ();
}
else
{
	//success!
	die ($result[0]);
}
?>